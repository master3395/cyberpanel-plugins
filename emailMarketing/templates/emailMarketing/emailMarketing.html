{% extends "baseTemplate/index.html" %}
{% load i18n %}
{% block title %}{% trans "Email Marketing - CyberPanel" %}{% endblock %}
{% block content %}

{% load static %}
{% get_current_language as LANGUAGE_CODE %}
<!-- Current language: {{ LANGUAGE_CODE }} -->


<div class="container">

    <div id="page-title">
       <h2 id="domainNamePage">{% trans "Email Marketing" %}</h2>
       <p>{% trans "Select users to Enable/Disable Email Marketing feature!" %}</p>
    </div>

    <!-- Plugin Information Section - Always Visible -->
    <div class="alert alert-info" style="background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 8px; padding: 15px 20px; margin-bottom: 25px;">
        <i class="fas fa-info-circle" style="color: #0c5460; margin-right: 8px;"></i>
        <strong style="color: #0c5460;">{% trans "Plugin Information" %}</strong>
        <ul class="mb-0 mt-2" style="list-style: none; padding-left: 0; margin-top: 10px;">
            <li style="margin-bottom: 8px;"><strong>{% trans "Name" %}:</strong> {{ plugin_name|default:"Email Marketing" }}</li>
            <li style="margin-bottom: 8px;"><strong>{% trans "Version" %}:</strong> {{ version|default:"1.0.0" }}</li>
            <li style="margin-bottom: 0;">
                <strong>{% trans "Status" %}:</strong> 
                <span class="badge badge-success" style="background: #28a745; color: white; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 600;">{{ status|default:"Active" }}</span>
            </li>
        </ul>
    </div>

<div ng-controller="emailMarketing" class="panel" style="background: var(--bg-primary, white); border-color: var(--border-color, #ddd);">
    <div class="panel-body" style="background: var(--bg-primary, white); color: var(--text-primary, #333);">

    <h3 class="content-box-header">
            {% trans "Email Marketing" %} <img ng-hide="cyberPanelLoading" src="{% static 'images/loading.gif' %}">
        </h3>

    {% if installCheck == 0 %}

        <div class="row">
            <div class="col-md-12 text-center" style="margin-bottom: 2%;">
                <h3>{% trans "Email Policy Server is not enabled " %}
                    <a href="{% url 'emailPolicyServer' %}">
                    <button class="btn btn-alt btn-hover btn-blue-alt">
                        <span>{% trans "Enable Now." %}</span>
                        <i class="glyph-icon icon-arrow-right"></i>
                    </button></a></h3>
            </div>
        </div>
    {% else %}
        <div class="example-box-wrapper">

                <table cellpadding="0" cellspacing="0" border="0" class="table table-striped" id="datatable-example" style="background: var(--bg-primary, white); color: var(--text-primary, #333); border-color: var(--border-color, #ddd);">
                <thead>
                <tr>
                    <th>{% trans 'ID' %}</th>
                    <th>{% trans 'Username' %}</th>
                    <th>{% trans 'Status' %}</th>
                </tr>
                </thead>
                <tbody>

                <tr ng-repeat="user in users track by $index">
                    <td ><code ng-bind="user.id"></code></td>
                    <td><code ng-bind="user.userName"></code></td>
                    <td>
                       <img style="margin-right: 4%;" ng-show="user.status==1"  title="{% trans 'Email Marketing Enabled.' %}"  src="{% static 'mailServer/vpsON.png' %}">
                       <button ng-click="enableDisableMarketing(0, user.userName)" ng-show="user.status==1" class="btn ra-100 btn-danger">{% trans 'Disable' %}</button>
                       <img style="margin-right: 4%;" ng-show="user.status==0"  title="{% trans 'Email Marketing Disabled.' %}"  src="{% static 'mailServer/vpsOff.png' %}">
                       <button ng-click="enableDisableMarketing(1, user.userName)" ng-show="user.status==0" class="btn ra-100 btn-success">{% trans 'Enable' %}</button>
                    </td>
                </tr>

                </tbody>
                </table>

        </div>

    {% endif %}
    </div>
</div>



{% endblock %}
